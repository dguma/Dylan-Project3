{"ast":null,"code":"'use strict';\n/*!\n * Module dependencies.\n */\n\nvar RegExpClone = require('regexp-clone');\n/**\n * Clones objects\n *\n * @param {Object} obj the object to clone\n * @param {Object} options\n * @return {Object} the cloned object\n * @api private\n */\n\n\nvar clone = exports.clone = function clone(obj, options) {\n  if (obj === undefined || obj === null) return obj;\n  if (Array.isArray(obj)) return exports.cloneArray(obj, options);\n\n  if (obj.constructor) {\n    if (/ObjectI[dD]$/.test(obj.constructor.name)) {\n      return 'function' == typeof obj.clone ? obj.clone() : new obj.constructor(obj.id);\n    }\n\n    if ('ReadPreference' === obj._type && obj.isValid && obj.toObject) {\n      return 'function' == typeof obj.clone ? obj.clone() : new obj.constructor(obj.mode, clone(obj.tags, options));\n    }\n\n    if ('Binary' == obj._bsontype && obj.buffer && obj.value) {\n      return 'function' == typeof obj.clone ? obj.clone() : new obj.constructor(obj.value(true), obj.sub_type);\n    }\n\n    if ('Date' === obj.constructor.name || 'Function' === obj.constructor.name) return new obj.constructor(+obj);\n    if ('RegExp' === obj.constructor.name) return RegExpClone(obj);\n    if ('Buffer' === obj.constructor.name) return exports.cloneBuffer(obj);\n  }\n\n  if (isObject(obj)) return exports.cloneObject(obj, options);\n  if (obj.valueOf) return obj.valueOf();\n};\n/*!\n * ignore\n */\n\n\nvar cloneObject = exports.cloneObject = function cloneObject(obj, options) {\n  var retainKeyOrder = options && options.retainKeyOrder,\n      minimize = options && options.minimize,\n      ret = {},\n      hasKeys,\n      keys,\n      val,\n      k,\n      i;\n\n  if (retainKeyOrder) {\n    for (k in obj) {\n      val = clone(obj[k], options);\n\n      if (!minimize || 'undefined' !== typeof val) {\n        hasKeys || (hasKeys = true);\n        ret[k] = val;\n      }\n    }\n  } else {\n    // faster\n    keys = Object.keys(obj);\n    i = keys.length;\n\n    while (i--) {\n      k = keys[i];\n      val = clone(obj[k], options);\n\n      if (!minimize || 'undefined' !== typeof val) {\n        if (!hasKeys) hasKeys = true;\n        ret[k] = val;\n      }\n    }\n  }\n\n  return minimize ? hasKeys && ret : ret;\n};\n\nvar cloneArray = exports.cloneArray = function cloneArray(arr, options) {\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) ret.push(clone(arr[i], options));\n\n  return ret;\n};\n/**\n * process.nextTick helper.\n *\n * Wraps the given `callback` in a try/catch. If an error is\n * caught it will be thrown on nextTick.\n *\n * node-mongodb-native had a habit of state corruption when\n * an error was immediately thrown from within a collection\n * method (find, update, etc) callback.\n *\n * @param {Function} [callback]\n * @api private\n */\n\n\nvar tick = exports.tick = function tick(callback) {\n  if ('function' !== typeof callback) return;\n  return function () {\n    // callbacks should always be fired on the next\n    // turn of the event loop. A side benefit is\n    // errors thrown from executing the callback\n    // will not cause drivers state to be corrupted\n    // which has historically been a problem.\n    var args = arguments;\n    soon(function () {\n      callback.apply(this, args);\n    });\n  };\n};\n/**\n * Merges `from` into `to` without overwriting existing properties.\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\n\nvar merge = exports.merge = function merge(to, from) {\n  var keys = Object.keys(from),\n      i = keys.length,\n      key;\n\n  while (i--) {\n    key = keys[i];\n\n    if ('undefined' === typeof to[key]) {\n      to[key] = from[key];\n    } else {\n      if (exports.isObject(from[key])) {\n        merge(to[key], from[key]);\n      } else {\n        to[key] = from[key];\n      }\n    }\n  }\n};\n/**\n * Same as merge but clones the assigned values.\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\n\nvar mergeClone = exports.mergeClone = function mergeClone(to, from) {\n  var keys = Object.keys(from),\n      i = keys.length,\n      key;\n\n  while (i--) {\n    key = keys[i];\n\n    if ('undefined' === typeof to[key]) {\n      // make sure to retain key order here because of a bug handling the $each\n      // operator in mongodb 2.4.4\n      to[key] = clone(from[key], {\n        retainKeyOrder: 1\n      });\n    } else {\n      if (exports.isObject(from[key])) {\n        mergeClone(to[key], from[key]);\n      } else {\n        // make sure to retain key order here because of a bug handling the\n        // $each operator in mongodb 2.4.4\n        to[key] = clone(from[key], {\n          retainKeyOrder: 1\n        });\n      }\n    }\n  }\n};\n/**\n * Read pref helper (mongo 2.2 drivers support this)\n *\n * Allows using aliases instead of full preference names:\n *\n *     p   primary\n *     pp  primaryPreferred\n *     s   secondary\n *     sp  secondaryPreferred\n *     n   nearest\n *\n * @param {String} pref\n */\n\n\nexports.readPref = function readPref(pref) {\n  switch (pref) {\n    case 'p':\n      pref = 'primary';\n      break;\n\n    case 'pp':\n      pref = 'primaryPreferred';\n      break;\n\n    case 's':\n      pref = 'secondary';\n      break;\n\n    case 'sp':\n      pref = 'secondaryPreferred';\n      break;\n\n    case 'n':\n      pref = 'nearest';\n      break;\n  }\n\n  return pref;\n};\n/**\n * Object.prototype.toString.call helper\n */\n\n\nvar _toString = Object.prototype.toString;\n\nvar toString = exports.toString = function (arg) {\n  return _toString.call(arg);\n};\n/**\n * Determines if `arg` is an object.\n *\n * @param {Object|Array|String|Function|RegExp|any} arg\n * @return {Boolean}\n */\n\n\nvar isObject = exports.isObject = function (arg) {\n  return '[object Object]' == exports.toString(arg);\n};\n/**\n * Determines if `arg` is an array.\n *\n * @param {Object}\n * @return {Boolean}\n * @see nodejs utils\n */\n\n\nvar isArray = exports.isArray = function (arg) {\n  return Array.isArray(arg) || 'object' == typeof arg && '[object Array]' == exports.toString(arg);\n};\n/**\n * Object.keys helper\n */\n\n\nexports.keys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var k in obj) if (obj.hasOwnProperty(k)) {\n    keys.push(k);\n  }\n\n  return keys;\n};\n/**\n * Basic Object.create polyfill.\n * Only one argument is supported.\n *\n * Based on https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create\n */\n\n\nexports.create = 'function' == typeof Object.create ? Object.create : create;\n\nfunction create(proto) {\n  if (arguments.length > 1) {\n    throw new Error(\"Adding properties is not supported\");\n  }\n\n  function F() {}\n\n  F.prototype = proto;\n  return new F();\n}\n/**\n * inheritance\n */\n\n\nexports.inherits = function (ctor, superCtor) {\n  ctor.prototype = exports.create(superCtor.prototype);\n  ctor.prototype.constructor = ctor;\n};\n/**\n * nextTick helper\n * compat with node 0.10 which behaves differently than previous versions\n */\n\n\nvar soon = exports.soon = 'function' == typeof setImmediate ? setImmediate : process.nextTick;\n/**\n * Clones the contents of a buffer.\n *\n * @param {Buffer} buff\n * @return {Buffer}\n */\n\nexports.cloneBuffer = function (buff) {\n  var dupe = new Buffer(buff.length);\n  buff.copy(dupe, 0, 0, buff.length);\n  return dupe;\n};\n/**\n * Check if this object is an arguments object\n *\n * @param {Any} v\n * @return {Boolean}\n */\n\n\nexports.isArgumentsObject = function (v) {\n  return Object.prototype.toString.call(v) === '[object Arguments]';\n};","map":{"version":3,"sources":["/home/pumaguma/Desktop/project-draft/front/node_modules/mquery/lib/utils.js"],"names":["RegExpClone","require","clone","exports","obj","options","undefined","Array","isArray","cloneArray","constructor","test","name","id","_type","isValid","toObject","mode","tags","_bsontype","buffer","value","sub_type","cloneBuffer","isObject","cloneObject","valueOf","retainKeyOrder","minimize","ret","hasKeys","keys","val","k","i","Object","length","arr","l","push","tick","callback","args","arguments","soon","apply","merge","to","from","key","mergeClone","readPref","pref","_toString","prototype","toString","arg","call","hasOwnProperty","create","proto","Error","F","inherits","ctor","superCtor","setImmediate","process","nextTick","buff","dupe","Buffer","copy","isArgumentsObject","v"],"mappings":"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","sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nvar RegExpClone = require('regexp-clone')\n\n/**\n * Clones objects\n *\n * @param {Object} obj the object to clone\n * @param {Object} options\n * @return {Object} the cloned object\n * @api private\n */\n\nvar clone = exports.clone = function clone (obj, options) {\n  if (obj === undefined || obj === null)\n    return obj;\n\n  if (Array.isArray(obj))\n    return exports.cloneArray(obj, options);\n\n  if (obj.constructor) {\n    if (/ObjectI[dD]$/.test(obj.constructor.name)) {\n      return 'function' == typeof obj.clone\n        ? obj.clone()\n        : new obj.constructor(obj.id);\n    }\n\n    if ('ReadPreference' === obj._type && obj.isValid && obj.toObject) {\n      return 'function' == typeof obj.clone\n        ? obj.clone()\n        : new obj.constructor(obj.mode, clone(obj.tags, options));\n    }\n\n    if ('Binary' == obj._bsontype && obj.buffer && obj.value) {\n      return 'function' == typeof obj.clone\n        ? obj.clone()\n        : new obj.constructor(obj.value(true), obj.sub_type);\n    }\n\n    if ('Date' === obj.constructor.name || 'Function' === obj.constructor.name)\n      return new obj.constructor(+obj);\n\n    if ('RegExp' === obj.constructor.name)\n      return RegExpClone(obj);\n\n    if ('Buffer' === obj.constructor.name)\n      return exports.cloneBuffer(obj);\n  }\n\n  if (isObject(obj))\n    return exports.cloneObject(obj, options);\n\n  if (obj.valueOf)\n    return obj.valueOf();\n};\n\n/*!\n * ignore\n */\n\nvar cloneObject = exports.cloneObject = function cloneObject (obj, options) {\n  var retainKeyOrder = options && options.retainKeyOrder\n    , minimize = options && options.minimize\n    , ret = {}\n    , hasKeys\n    , keys\n    , val\n    , k\n    , i\n\n  if (retainKeyOrder) {\n    for (k in obj) {\n      val = clone(obj[k], options);\n\n      if (!minimize || ('undefined' !== typeof val)) {\n        hasKeys || (hasKeys = true);\n        ret[k] = val;\n      }\n    }\n  } else {\n    // faster\n\n    keys = Object.keys(obj);\n    i = keys.length;\n\n    while (i--) {\n      k = keys[i];\n      val = clone(obj[k], options);\n\n      if (!minimize || ('undefined' !== typeof val)) {\n        if (!hasKeys) hasKeys = true;\n        ret[k] = val;\n      }\n    }\n  }\n\n  return minimize\n    ? hasKeys && ret\n    : ret;\n};\n\nvar cloneArray = exports.cloneArray = function cloneArray (arr, options) {\n  var ret = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    ret.push(clone(arr[i], options));\n  return ret;\n};\n\n/**\n * process.nextTick helper.\n *\n * Wraps the given `callback` in a try/catch. If an error is\n * caught it will be thrown on nextTick.\n *\n * node-mongodb-native had a habit of state corruption when\n * an error was immediately thrown from within a collection\n * method (find, update, etc) callback.\n *\n * @param {Function} [callback]\n * @api private\n */\n\nvar tick = exports.tick = function tick (callback) {\n  if ('function' !== typeof callback) return;\n  return function () {\n    // callbacks should always be fired on the next\n    // turn of the event loop. A side benefit is\n    // errors thrown from executing the callback\n    // will not cause drivers state to be corrupted\n    // which has historically been a problem.\n    var args = arguments;\n    soon(function(){\n      callback.apply(this, args);\n    });\n  }\n}\n\n/**\n * Merges `from` into `to` without overwriting existing properties.\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\nvar merge = exports.merge = function merge (to, from) {\n  var keys = Object.keys(from)\n    , i = keys.length\n    , key\n\n  while (i--) {\n    key = keys[i];\n    if ('undefined' === typeof to[key]) {\n      to[key] = from[key];\n    } else {\n      if (exports.isObject(from[key])) {\n        merge(to[key], from[key]);\n      } else {\n        to[key] = from[key];\n      }\n    }\n  }\n}\n\n/**\n * Same as merge but clones the assigned values.\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\nvar mergeClone = exports.mergeClone = function mergeClone (to, from) {\n  var keys = Object.keys(from)\n    , i = keys.length\n    , key\n\n  while (i--) {\n    key = keys[i];\n    if ('undefined' === typeof to[key]) {\n      // make sure to retain key order here because of a bug handling the $each\n      // operator in mongodb 2.4.4\n      to[key] = clone(from[key], { retainKeyOrder : 1});\n    } else {\n      if (exports.isObject(from[key])) {\n        mergeClone(to[key], from[key]);\n      } else {\n        // make sure to retain key order here because of a bug handling the\n        // $each operator in mongodb 2.4.4\n        to[key] = clone(from[key], { retainKeyOrder : 1});\n      }\n    }\n  }\n}\n\n/**\n * Read pref helper (mongo 2.2 drivers support this)\n *\n * Allows using aliases instead of full preference names:\n *\n *     p   primary\n *     pp  primaryPreferred\n *     s   secondary\n *     sp  secondaryPreferred\n *     n   nearest\n *\n * @param {String} pref\n */\n\nexports.readPref = function readPref (pref) {\n  switch (pref) {\n    case 'p':\n      pref = 'primary';\n      break;\n    case 'pp':\n      pref = 'primaryPreferred';\n      break;\n    case 's':\n      pref = 'secondary';\n      break;\n    case 'sp':\n      pref = 'secondaryPreferred';\n      break;\n    case 'n':\n      pref = 'nearest';\n      break;\n  }\n\n  return pref;\n}\n\n/**\n * Object.prototype.toString.call helper\n */\n\nvar _toString = Object.prototype.toString;\nvar toString = exports.toString = function (arg) {\n  return _toString.call(arg);\n}\n\n/**\n * Determines if `arg` is an object.\n *\n * @param {Object|Array|String|Function|RegExp|any} arg\n * @return {Boolean}\n */\n\nvar isObject = exports.isObject = function (arg) {\n  return '[object Object]' == exports.toString(arg);\n}\n\n/**\n * Determines if `arg` is an array.\n *\n * @param {Object}\n * @return {Boolean}\n * @see nodejs utils\n */\n\nvar isArray = exports.isArray = function (arg) {\n  return Array.isArray(arg) ||\n    'object' == typeof arg && '[object Array]' == exports.toString(arg);\n}\n\n/**\n * Object.keys helper\n */\n\nexports.keys = Object.keys || function (obj) {\n  var keys = [];\n  for (var k in obj) if (obj.hasOwnProperty(k)) {\n    keys.push(k);\n  }\n  return keys;\n}\n\n/**\n * Basic Object.create polyfill.\n * Only one argument is supported.\n *\n * Based on https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create\n */\n\nexports.create = 'function' == typeof Object.create\n  ? Object.create\n  : create;\n\nfunction create (proto) {\n  if (arguments.length > 1) {\n    throw new Error(\"Adding properties is not supported\")\n  }\n\n  function F () {}\n  F.prototype = proto;\n  return new F;\n}\n\n/**\n * inheritance\n */\n\nexports.inherits = function (ctor, superCtor) {\n  ctor.prototype = exports.create(superCtor.prototype);\n  ctor.prototype.constructor = ctor;\n}\n\n/**\n * nextTick helper\n * compat with node 0.10 which behaves differently than previous versions\n */\n\nvar soon = exports.soon = 'function' == typeof setImmediate\n  ? setImmediate\n  : process.nextTick;\n\n/**\n * Clones the contents of a buffer.\n *\n * @param {Buffer} buff\n * @return {Buffer}\n */\n\nexports.cloneBuffer = function (buff) {\n  var dupe = new Buffer(buff.length);\n  buff.copy(dupe, 0, 0, buff.length);\n  return dupe;\n};\n\n/**\n * Check if this object is an arguments object\n *\n * @param {Any} v\n * @return {Boolean}\n */\n\nexports.isArgumentsObject = function(v) {\n  return Object.prototype.toString.call(v) === '[object Arguments]';\n};\n"]},"metadata":{},"sourceType":"script"}