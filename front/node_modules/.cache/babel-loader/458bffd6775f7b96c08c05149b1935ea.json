{"ast":null,"code":"var util = require('util'),\n    winston = require('../../winston'),\n    http = require('http'),\n    https = require('https'),\n    Stream = require('stream').Stream,\n    Transport = require('./transport').Transport; //\n// ### function Http (options)\n// #### @options {Object} Options for this instance.\n// Constructor function for the Http transport object responsible\n// for persisting log messages and metadata to a terminal or TTY.\n//\n\n\nvar Http = exports.Http = function (options) {\n  Transport.call(this, options);\n  options = options || {};\n  this.name = 'http';\n  this.ssl = !!options.ssl;\n  this.host = options.host || 'localhost';\n  this.port = options.port;\n  this.auth = options.auth;\n  this.path = options.path || '';\n  this.agent = options.agent;\n  this.headers = options.headers || {};\n  this.headers['content-type'] = 'application/json';\n\n  if (!this.port) {\n    this.port = this.ssl ? 443 : 80;\n  }\n};\n\nutil.inherits(Http, winston.Transport); //\n// Expose the name of this Transport on the prototype\n//\n\nHttp.prototype.name = 'http'; //\n// ### function _request (options, callback)\n// #### @callback {function} Continuation to respond to when complete.\n// Make a request to a winstond server or any http server which can\n// handle json-rpc.\n//\n\nHttp.prototype._request = function (options, callback) {\n  options = options || {};\n  var auth = options.auth || this.auth,\n      path = options.path || this.path || '',\n      req;\n  delete options.auth;\n  delete options.path; // Prepare options for outgoing HTTP request\n\n  req = (this.ssl ? https : http).request({\n    host: this.host,\n    port: this.port,\n    path: '/' + path.replace(/^\\//, ''),\n    method: 'POST',\n    headers: this.headers,\n    agent: this.agent,\n    auth: auth ? auth.username + ':' + auth.password : ''\n  });\n  req.on('error', callback);\n  req.on('response', function (res) {\n    var body = '';\n    res.on('data', function (chunk) {\n      body += chunk;\n    });\n    res.on('end', function () {\n      callback(null, res, body);\n    });\n    res.resume();\n  });\n  req.end(new Buffer.from(JSON.stringify(options), 'utf8'));\n}; //\n// ### function log (level, msg, [meta], callback)\n// #### @level {string} Level at which to log the message.\n// #### @msg {string} Message to log\n// #### @meta {Object} **Optional** Additional metadata to attach\n// #### @callback {function} Continuation to respond to when complete.\n// Core logging method exposed to Winston. Metadata is optional.\n//\n\n\nHttp.prototype.log = function (level, msg, meta, callback) {\n  var self = this;\n\n  if (typeof meta === 'function') {\n    callback = meta;\n    meta = {};\n  }\n\n  var options = {\n    method: 'collect',\n    params: {\n      level: level,\n      message: msg,\n      meta: meta\n    }\n  };\n\n  if (meta) {\n    if (meta.path) {\n      options.path = meta.path;\n      delete meta.path;\n    }\n\n    if (meta.auth) {\n      options.auth = meta.auth;\n      delete meta.auth;\n    }\n  }\n\n  this._request(options, function (err, res) {\n    if (res && res.statusCode !== 200) {\n      err = new Error('HTTP Status Code: ' + res.statusCode);\n    }\n\n    if (err) return callback(err); // TODO: emit 'logged' correctly,\n    // keep track of pending logs.\n\n    self.emit('logged');\n    if (callback) callback(null, true);\n  });\n}; //\n// ### function query (options, callback)\n// #### @options {Object} Loggly-like query options for this instance.\n// #### @callback {function} Continuation to respond to when complete.\n// Query the transport. Options object is optional.\n//\n\n\nHttp.prototype.query = function (options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n\n  var self = this,\n      options = this.normalizeQuery(options);\n  options = {\n    method: 'query',\n    params: options\n  };\n\n  if (options.params.path) {\n    options.path = options.params.path;\n    delete options.params.path;\n  }\n\n  if (options.params.auth) {\n    options.auth = options.params.auth;\n    delete options.params.auth;\n  }\n\n  this._request(options, function (err, res, body) {\n    if (res && res.statusCode !== 200) {\n      err = new Error('HTTP Status Code: ' + res.statusCode);\n    }\n\n    if (err) return callback(err);\n\n    if (typeof body === 'string') {\n      try {\n        body = JSON.parse(body);\n      } catch (e) {\n        return callback(e);\n      }\n    }\n\n    callback(null, body);\n  });\n}; //\n// ### function stream (options)\n// #### @options {Object} Stream options for this instance.\n// Returns a log stream for this transport. Options object is optional.\n//\n\n\nHttp.prototype.stream = function (options) {\n  options = options || {};\n  var self = this,\n      stream = new Stream(),\n      req,\n      buff;\n\n  stream.destroy = function () {\n    req.destroy();\n  };\n\n  options = {\n    method: 'stream',\n    params: options\n  };\n\n  if (options.params.path) {\n    options.path = options.params.path;\n    delete options.params.path;\n  }\n\n  if (options.params.auth) {\n    options.auth = options.params.auth;\n    delete options.params.auth;\n  }\n\n  req = this._request(options);\n  buff = '';\n  req.on('data', function (data) {\n    var data = (buff + data).split(/\\n+/),\n        l = data.length - 1,\n        i = 0;\n\n    for (; i < l; i++) {\n      try {\n        stream.emit('log', JSON.parse(data[i]));\n      } catch (e) {\n        stream.emit('error', e);\n      }\n    }\n\n    buff = data[l];\n  });\n  req.on('error', function (err) {\n    stream.emit('error', err);\n  });\n  return stream;\n};","map":{"version":3,"sources":["/home/pumaguma/Desktop/project-draft/front/node_modules/winston/lib/winston/transports/http.js"],"names":["util","require","winston","http","https","Stream","Transport","Http","exports","options","call","name","ssl","host","port","auth","path","agent","headers","inherits","prototype","_request","callback","req","request","replace","method","username","password","on","res","body","chunk","resume","end","Buffer","from","JSON","stringify","log","level","msg","meta","self","params","message","err","statusCode","Error","emit","query","normalizeQuery","parse","e","stream","buff","destroy","data","split","l","length","i"],"mappings":"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","sourcesContent":["var util = require('util'),\n    winston = require('../../winston'),\n    http = require('http'),\n    https = require('https'),\n    Stream = require('stream').Stream,\n    Transport = require('./transport').Transport;\n\n//\n// ### function Http (options)\n// #### @options {Object} Options for this instance.\n// Constructor function for the Http transport object responsible\n// for persisting log messages and metadata to a terminal or TTY.\n//\nvar Http = exports.Http = function (options) {\n  Transport.call(this, options);\n  options = options || {};\n\n  this.name = 'http';\n  this.ssl = !!options.ssl;\n  this.host = options.host || 'localhost';\n  this.port = options.port;\n  this.auth = options.auth;\n  this.path = options.path || '';\n  this.agent = options.agent;\n  this.headers = options.headers || {};\n  this.headers['content-type'] = 'application/json';\n\n  if (!this.port) {\n    this.port = this.ssl ? 443 : 80;\n  }\n};\n\nutil.inherits(Http, winston.Transport);\n\n//\n// Expose the name of this Transport on the prototype\n//\nHttp.prototype.name = 'http';\n\n//\n// ### function _request (options, callback)\n// #### @callback {function} Continuation to respond to when complete.\n// Make a request to a winstond server or any http server which can\n// handle json-rpc.\n//\nHttp.prototype._request = function (options, callback) {\n  options = options || {};\n\n  var auth = options.auth || this.auth,\n      path = options.path || this.path || '',\n      req;\n\n  delete options.auth;\n  delete options.path;\n\n  // Prepare options for outgoing HTTP request\n  req = (this.ssl ? https : http).request({\n    host: this.host,\n    port: this.port,\n    path: '/' + path.replace(/^\\//, ''),\n    method: 'POST',\n    headers: this.headers,\n    agent: this.agent,\n    auth: (auth) ? auth.username + ':' + auth.password : ''\n  });\n\n  req.on('error', callback);\n  req.on('response', function (res) {\n    var body = '';\n\n    res.on('data', function (chunk) {\n      body += chunk;\n    });\n\n    res.on('end', function () {\n      callback(null, res, body);\n    });\n\n    res.resume();\n  });\n\n  req.end(new Buffer.from(JSON.stringify(options), 'utf8'));\n};\n\n//\n// ### function log (level, msg, [meta], callback)\n// #### @level {string} Level at which to log the message.\n// #### @msg {string} Message to log\n// #### @meta {Object} **Optional** Additional metadata to attach\n// #### @callback {function} Continuation to respond to when complete.\n// Core logging method exposed to Winston. Metadata is optional.\n//\nHttp.prototype.log = function (level, msg, meta, callback) {\n  var self = this;\n\n  if (typeof meta === 'function') {\n    callback = meta;\n    meta = {};\n  }\n\n  var options = {\n    method: 'collect',\n    params: {\n      level: level,\n      message: msg,\n      meta: meta\n    }\n  };\n\n  if (meta) {\n    if (meta.path) {\n      options.path = meta.path;\n      delete meta.path;\n    }\n\n    if (meta.auth) {\n      options.auth = meta.auth;\n      delete meta.auth;\n    }\n  }\n\n  this._request(options, function (err, res) {\n    if (res && res.statusCode !== 200) {\n      err = new Error('HTTP Status Code: ' + res.statusCode);\n    }\n\n    if (err) return callback(err);\n\n    // TODO: emit 'logged' correctly,\n    // keep track of pending logs.\n    self.emit('logged');\n\n    if (callback) callback(null, true);\n  });\n};\n\n//\n// ### function query (options, callback)\n// #### @options {Object} Loggly-like query options for this instance.\n// #### @callback {function} Continuation to respond to when complete.\n// Query the transport. Options object is optional.\n//\nHttp.prototype.query = function (options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n\n  var self = this,\n      options = this.normalizeQuery(options);\n\n  options = {\n    method: 'query',\n    params: options\n  };\n\n  if (options.params.path) {\n    options.path = options.params.path;\n    delete options.params.path;\n  }\n\n  if (options.params.auth) {\n    options.auth = options.params.auth;\n    delete options.params.auth;\n  }\n\n  this._request(options, function (err, res, body) {\n    if (res && res.statusCode !== 200) {\n      err = new Error('HTTP Status Code: ' + res.statusCode);\n    }\n\n    if (err) return callback(err);\n\n    if (typeof body === 'string') {\n      try {\n        body = JSON.parse(body);\n      } catch (e) {\n        return callback(e);\n      }\n    }\n\n    callback(null, body);\n  });\n};\n\n//\n// ### function stream (options)\n// #### @options {Object} Stream options for this instance.\n// Returns a log stream for this transport. Options object is optional.\n//\nHttp.prototype.stream = function (options) {\n  options = options || {};\n\n  var self = this,\n      stream = new Stream,\n      req,\n      buff;\n\n  stream.destroy = function () {\n    req.destroy();\n  };\n\n  options = {\n    method: 'stream',\n    params: options\n  };\n\n  if (options.params.path) {\n    options.path = options.params.path;\n    delete options.params.path;\n  }\n\n  if (options.params.auth) {\n    options.auth = options.params.auth;\n    delete options.params.auth;\n  }\n\n  req = this._request(options);\n  buff = '';\n\n  req.on('data', function (data) {\n    var data = (buff + data).split(/\\n+/),\n        l = data.length - 1,\n        i = 0;\n\n    for (; i < l; i++) {\n      try {\n        stream.emit('log', JSON.parse(data[i]));\n      } catch (e) {\n        stream.emit('error', e);\n      }\n    }\n\n    buff = data[l];\n  });\n\n  req.on('error', function (err) {\n    stream.emit('error', err);\n  });\n\n  return stream;\n};\n"]},"metadata":{},"sourceType":"script"}