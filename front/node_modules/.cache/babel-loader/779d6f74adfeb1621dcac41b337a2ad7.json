{"ast":null,"code":"'use strict';\n/*!\n * Module dependencies.\n */\n\nvar ObjectId = require('../types/objectid');\n\nvar utils = require('../utils');\n\nexports.flatten = flatten;\nexports.modifiedPaths = modifiedPaths;\n/*!\n * ignore\n */\n\nfunction flatten(update, path, options) {\n  var keys;\n\n  if (update && utils.isMongooseObject(update) && !Buffer.isBuffer(update)) {\n    keys = Object.keys(update.toObject({\n      transform: false,\n      virtuals: false\n    }));\n  } else {\n    keys = Object.keys(update || {});\n  }\n\n  var numKeys = keys.length;\n  var result = {};\n  path = path ? path + '.' : '';\n\n  for (var i = 0; i < numKeys; ++i) {\n    var key = keys[i];\n    var val = update[key];\n    result[path + key] = val;\n\n    if (shouldFlatten(val)) {\n      if (options && options.skipArrays && Array.isArray(val)) {\n        continue;\n      }\n\n      var flat = flatten(val, path + key, options);\n\n      for (var k in flat) {\n        result[k] = flat[k];\n      }\n\n      if (Array.isArray(val)) {\n        result[path + key] = val;\n      }\n    }\n  }\n\n  return result;\n}\n/*!\n * ignore\n */\n\n\nfunction modifiedPaths(update, path, result) {\n  var keys = Object.keys(update || {});\n  var numKeys = keys.length;\n  result = result || {};\n  path = path ? path + '.' : '';\n\n  for (var i = 0; i < numKeys; ++i) {\n    var key = keys[i];\n    var val = update[key];\n    result[path + key] = true;\n\n    if (utils.isMongooseObject(val) && !Buffer.isBuffer(val)) {\n      val = val.toObject({\n        transform: false,\n        virtuals: false\n      });\n    }\n\n    if (shouldFlatten(val)) {\n      modifiedPaths(val, path + key, result);\n    }\n  }\n\n  return result;\n}\n/*!\n * ignore\n */\n\n\nfunction shouldFlatten(val) {\n  return val && typeof val === 'object' && !(val instanceof Date) && !(val instanceof ObjectId) && (!Array.isArray(val) || val.length > 0) && !(val instanceof Buffer);\n}","map":{"version":3,"sources":["/home/pumaguma/Desktop/project-draft/front/node_modules/mongoose/lib/services/common.js"],"names":["ObjectId","require","utils","exports","flatten","modifiedPaths","update","path","options","keys","isMongooseObject","Buffer","isBuffer","Object","toObject","transform","virtuals","numKeys","length","result","i","key","val","shouldFlatten","skipArrays","Array","isArray","flat","k","Date"],"mappings":"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","sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nvar ObjectId = require('../types/objectid');\nvar utils = require('../utils');\n\nexports.flatten = flatten;\nexports.modifiedPaths = modifiedPaths;\n\n/*!\n * ignore\n */\n\nfunction flatten(update, path, options) {\n  var keys;\n  if (update && utils.isMongooseObject(update) && !Buffer.isBuffer(update)) {\n    keys = Object.keys(update.toObject({ transform: false, virtuals: false }));\n  } else {\n    keys = Object.keys(update || {});\n  }\n\n  var numKeys = keys.length;\n  var result = {};\n  path = path ? path + '.' : '';\n\n  for (var i = 0; i < numKeys; ++i) {\n    var key = keys[i];\n    var val = update[key];\n    result[path + key] = val;\n    if (shouldFlatten(val)) {\n      if (options && options.skipArrays && Array.isArray(val)) {\n        continue;\n      }\n      var flat = flatten(val, path + key, options);\n      for (var k in flat) {\n        result[k] = flat[k];\n      }\n      if (Array.isArray(val)) {\n        result[path + key] = val;\n      }\n    }\n  }\n\n  return result;\n}\n\n/*!\n * ignore\n */\n\nfunction modifiedPaths(update, path, result) {\n  var keys = Object.keys(update || {});\n  var numKeys = keys.length;\n  result = result || {};\n  path = path ? path + '.' : '';\n\n  for (var i = 0; i < numKeys; ++i) {\n    var key = keys[i];\n    var val = update[key];\n\n    result[path + key] = true;\n    if (utils.isMongooseObject(val) && !Buffer.isBuffer(val)) {\n      val = val.toObject({ transform: false, virtuals: false });\n    }\n    if (shouldFlatten(val)) {\n      modifiedPaths(val, path + key, result);\n    }\n  }\n\n  return result;\n}\n\n/*!\n * ignore\n */\n\nfunction shouldFlatten(val) {\n  return val &&\n    typeof val === 'object' &&\n    !(val instanceof Date) &&\n    !(val instanceof ObjectId) &&\n    (!Array.isArray(val) || val.length > 0) &&\n    !(val instanceof Buffer);\n}\n"]},"metadata":{},"sourceType":"script"}